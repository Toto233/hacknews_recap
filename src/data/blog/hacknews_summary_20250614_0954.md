---
title: 'Jemalloc：功成身退，传奇永续 | Hacker News 摘要 (2025-06-14)'
author: 'hacknews'
description: ''
pubDatetime: 2025-06-14 09:54:33.910+08:00
tags:
  - Jemalloc
  - Memory_Management
  - Ad_Fraud
  - Cybercrime
---

---

## 1. Jemalloc：功成身退，传奇永续 (Jemalloc Postmortem)

![Jemalloc：功成身退，传奇永续 ](D:\python\hacknews\images\20250614\Jemalloc_Postmortem.png)

jemalloc内存分配器，这个自2004年萌芽、已在开源世界服务近二十载的幕后英雄，近日宣布其活跃的上游开发阶段正式画上句号。但这绝非终点，得益于开放源代码特性，jemalloc将永远免费供公众使用，继续默默支撑无数系统高效运行。

回溯其诞生，2004年，一位开发者为Lkyen编程语言设计了这款内存分配器，并于2005年5月功能完备。尽管Lkyen项目最终搁浅，其核心组件却找到了更广阔舞台。2005年9月，面对FreeBSD系统在多处理器并行执行瓶颈，jemalloc被巧妙引入，旨在提升内存管理效率。然而，初期的统一分配策略导致严重碎片化问题，尤其处理KDE应用负载时。开发者通过不懈钻研和实验，最终在2006年彻底改进布局算法，转为分区管理，成功解决了难题。

2007年11月，随着Firefox 3发布临近，Mozilla团队也面临内存碎片化困扰，jemalloc再次临危受命。开发者与Mozilla展开长达一年紧密合作，成功将其移植到Windows平台，并在此过程中不断优化代码结构。这段跨越平台与团队的合作，不仅解决了Firefox性能难题，也为jemalloc成熟发展注入强大动力。如今，虽然上游开发止步，但jemalloc传奇仍在继续，它以卓越性能和开放精神，成为开源社区合作共赢典范，激励我们对未来技术创新的无限好奇。

原文链接：https://jasone.github.io/2025/06/12/jemalloc-postmortem/

论坛讨论链接：https://news.ycombinator.com/item?id=44264958

社区关于Jemalloc内存分配器的讨论围绕其代码库被归档展开。一位曾参与Jemalloc团队的发言者表示，尽管对归档感到遗憾，但理解Meta内部团队难以应对大量GitHub问题的困境（例如有人报告在Itanium处理器上测试套件失败）。他认为Jemalloc仍是性能最佳且易于使用的通用内存分配器，优于难以集成（尤其是不使用Bazel）的TCMalloc。

该发言者建议在归档前发布一个最终的Jemalloc 6.0版本，并现代化默认设置。主要建议包括：默认禁用“缓存不感知”设置，以避免将16KiB大小类膨胀到20KiB（此设置在当前TLB关联性下已过时）；以及将默认“页面大小”从4KiB增加到16KiB，这将相应地把大尺寸类别截止点从16KiB提高到64KiB。他在Meta内部的经验表明，此更改能带来数个百分点的CPU性能提升。他还提及其他优化，如默认启用`metadata_thp`和调整slab的扩展大小以减少碎片。

讨论中，一位用户承认自己就是那个报告Itanium测试失败的人，引发了对Itanium和HP Superdome服务器的怀旧讨论。有评论者将Superdome的移植比作即将撞上冰山的船，暗示其难度。另有人提及Itanium“搞垮了SGI”，甚至认为它“杀死了除了ARM和POWER之外的所有东西”，凸显了其在处理器历史中的争议性影响。

---

## 2. 揭秘：虚假验证码下的广告黑产帝国 (A dark adtech empire fed by fake CAPTCHAs)

![揭秘：虚假验证码下的广告黑产帝国 ](D:\python\hacknews\images\20250614\A_dark_adtech_empire_fed_by_fake_CAPTCHAs.png)

![揭秘：虚假验证码下的广告黑产帝国 ](https://krebsonsecurity.com/wp-content/uploads/2025/06/firefox-notifications.png)

![揭秘：虚假验证码下的广告黑产帝国 ](https://krebsonsecurity.com/wp-content/uploads/2025/06/chromenotifications.png)

该截图展示一个专业的新闻或深度报道网页，顶部醒目标题为“一个由虚假CAPTCHA滋养的黑暗广告技术帝国”。页面布局简洁，通常包含网站标志与导航栏。主体内容区域突出文章主题，标题下方可能配有与网络欺诈、数据安全或广告技术相关的配图，辅助理解。文章正文预计深入剖析该“黑暗帝国”如何利用伪造CAPTCHA进行广告欺诈，内容涵盖调查发现、技术分析及案例揭露。整体视觉风格严肃，旨在揭示网络广告生态中隐蔽的欺诈链条，警示行业风险。

原文链接：https://krebsonsecurity.com/2025/06/inside-a-dark-adtech-empire-fed-by-fake-captchas/

论坛讨论链接：https://news.ycombinator.com/item?id=44263780

关于网络浏览器推送通知的讨论中，一位用户首先指出，TacoLoco等流量变现网络利用欺骗手段诱使用户启用推送通知，导致其长辈电脑桌面被大量信息骚扰，难以关闭。

有评论者认为，浏览器推送通知从一开始就是“有害的”，尤其其许可弹窗的优先地位。他们认为这一概念源于2010年代“手机化桌面”的炒作，旨在模仿RSS生态系统，但最终却被用于移动应用中不应存在于桌面浏览器的“黑暗模式”。

然而，另一位用户则表示非常喜欢这项功能，因为它省去了安装大量应用程序来接收偶尔通知的麻烦。尽管他们承认浏览器伪造操作系统通知是一个明显的缺陷，但认为目前Chrome（作为主导浏览器）仅在部分网站上显示许可弹窗的机制，反而扼杀了许多网站有用的通知支持。

接着，有评论者提出，浏览器推送通知仅限于基于网页的电子邮件和聊天两种有效场景，其他用途多是为网站增加用户粘性而非解决用户需求。他们宁愿通过电子邮件接收更新，并质疑即使是聊天应用，在网页未打开时也应优先考虑邮件通知。

对此，另一位用户举例YouTube，认为其通过推送新视频上传和推荐来增加用户参与度是成功的，因为用户接收的是他们感兴趣的内容，实现了平台与用户的“双赢”。

---

## 3. GPU文字渲染：纤毫毕现，告别模糊 (Rendering Crispy Text on the GPU)

一位技术爱好者长期致力于实时文本渲染的优化，他对现有方案中诸如抗锯齿、纹理大小、渲染速度及缩放流畅度等问题总存一丝不满。尽管此前基于多通道符号距离场（SDFs）的方案已取得进展，但仍有提升空间。最近，一块新购的OLED显示器因其独特的亚像素结构导致的边缘模糊问题，成为了他重新投入研究的契机，旨在实现更完美的亚像素抗锯齿效果。

他发现SDFs在处理细节丰富或笔画纤细的字体时表现不佳，如Miama字体，细微之处易丢失，且需高分辨率才能消除伪影。此外，SDFs需离线生成并存储于庞大的字体图集（如Miama字体图集高达4096x1152像素，每个字形占64x64区域），尤其对于中日韩等拥有海量字符的语言，图集管理和内存开销巨大，显著影响性能。SDFs在缩放及引入亚像素抗锯齿等新特性方面也缺乏灵活性。

为此，这位开发者着手开发全新的实时字形渲染方法。这项创新不仅显著提升了字体渲染质量，使纤细笔画也能清晰呈现，还大幅优化了内存占用，摆脱了传统大尺寸字体图集的束缚，并极大增强了渲染的灵活性。此举预示着屏幕文字显示将迈入一个新纪元，有望为用户带来前所未有的视觉清晰度和流畅体验，让每一次阅读都充满惊喜与愉悦。

原文链接：https://osor.io/text

论坛讨论链接：https://news.ycombinator.com/item?id=44265233

社区上，一篇关于字体渲染的帖子引发热议。原作者感谢大家的参与。讨论很快聚焦于亚像素字体渲染技术。

有评论者认为亚像素渲染对可读性至关重要，但显示标准缺乏像素布局信息是其遗憾。然而，另一位评论者反驳称，该技术仅适用于标准分辨率显示器，随着高分屏普及，其必要性降低。他指出，亚像素渲染导致问题，是CRT到Retina时代的临时方案，已“落后”，苹果从macOS移除它有其理由。

对此，有评论者不认同高分屏已普及的观点，指出多数人仍用1080p，并提到macOS在非Retina屏上显示不佳正是因缺乏亚像素抗锯齿。

一位强烈支持亚像素渲染的评论者则以其47英寸4K显示器为例，指出即使在4K下，亚像素渲染仍能显著提升文字清晰度。他认为这项技术虽复杂但仍是“好技术”，相比渲染四倍像素以达到Retina效果，低分辨率显示器配合亚像素渲染更经济，否则需昂贵且高要求的8K显示器。他强调，现在淘汰亚像素渲染为时尚早，它仍有价值。

---

## 4. 月如一粟，宇宙无垠：颠覆你对太阳系的想象 (If the moon were only 1 pixel: A tediously accurate solar system model (2014))

一次引人入胜的虚拟太空之旅，从太阳系内部启程，揭示了宇宙尺度之浩瀚。旅程中，行星间距之遥远令人惊叹，例如，飞往火星需耗时七个月，而木星距地球逾十亿公里。文章强调，传统太阳系地图难以按比例呈现，因其主要由难以想象的空旷空间组成。人类大脑难以直观把握如此宏大尺度，即使借助隐喻，如需475英尺宽纸张才能打印完整太阳系图，仍难完全把握其真实面貌。然而，正是在这浩瀚的时空中，奇迹不断发生，从水滴雕刻峡谷到恒星坍缩，无不彰显宇宙的无限奥秘与活力。

原文链接：https://joshworth.com/dev/pixelspace/pixelspace_solarsystem.html

论坛讨论链接：https://news.ycombinator.com/item?id=44266828

社区中有用户对肉眼能看到木星感到惊讶，指出其巨大距离与相对直径，并以81米外观察一枚微光硬币作比，推断既然能见木星，那枚硬币也应可见。

有评论认为光速“慢”得令人觉得一切遥不可及。但另一位讨论者反驳，认为光的“慢”可能源于人类快速新陈代谢下时间感知被压缩。他以植物为例，指出其生命活动在更长尺度上才显现，如同恒星视角下，数十亿年寿命使人类历史和大陆漂移都如眨眼般短暂。在此宇宙尺度下，光速便不再缓慢，万年旅程也可能仅如十分钟通勤，体现出哲学上的相对性。

这一深刻思考引发共鸣，有人因此联想到被忽略的植物并去照料。另有用户推荐了奥拉夫·斯特普尔顿的哲学著作，探讨人类和宇宙在宏大尺度上的历史。还有评论者将人类比作宇宙尺度的“马达蛋白”，思考自身在宇宙中的定位。

---

## 5. 我促成惠普天价收购Palm，却目睹其49天内自毁长城 (I convinced HP's board to buy Palm and watched them kill it)

![我促成惠普天价收购Palm，却目睹其49天内自毁长城 ](D:\python\hacknews\images\20250614\I_convinced_HP's_board_to_buy_Palm_and_watched_the.png)

![我促成惠普天价收购Palm，却目睹其49天内自毁长城 ](https://substackcdn.com/image/fetch/w_520,h_272,c_fill,f_auto,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbd57a95d-b779-4344-b65d-ec9cf506f3d3_1456x1048.jpeg)

2010年初，PC巨头惠普急切寻求移动平台能力，以应对智能手机和平板电脑对传统业务的冲击。时任惠普首席技术官的Phil McKinney，在对濒临破产的Palm公司进行深度技术尽职调查后，被其WebOS系统深深吸引。WebOS拥有当时iOS和安卓都无法比拟的真正多任务处理、优雅的用户界面设计，以及突破性的底层技术架构，McKinney坚信这是移动计算的未来。他成功说服董事会，推动惠普在2010年4月以12亿美元高价收购Palm。

然而，就在收购于7月完成，McKinney满怀信心地协助Palm团队融入惠普庞大的制造、供应链和客户资源时，一场意外打断了他。他因手术卧床休养，无法干预。令人扼腕的是，仅仅49天内，这项被寄予厚望、承载着未来愿景的WebOS创新价值竟被惠普迅速扼杀，12亿美元的投资付诸东流。McKinney虽为此承受了巨大的个人代价和不白之冤，却也从中深刻反思了导致突破性技术夭折的系统性思维错误。

原文链接：https://philmckinney.substack.com/p/i-convinced-hps-board-to-buy-palm

论坛讨论链接：https://news.ycombinator.com/item?id=44270709

社区讨论围绕惠普TouchPad平板电脑的失败展开。一位讨论者指出，TouchPad的上市定价过高（499美元与iPad竞争），缺乏应用生态系统和市场营销支持，且产品显得仓促，最终导致失败。他推测，即便作者在病休前与Palm紧密合作，糟糕的决策可能早已做出。

另一位讨论者强调，要使类似产品成功，需要多年的持续投入。他们认为，错误估计市场规模并非罕见，但营销部门应能预测不同价格点下的销售范围。他们还将TouchPad的困境与Windows Phone的失败相提并论，指出两者都因缺乏足够的应用生态系统和投入时间而夭折。

讨论中还引入了市场预测的例子：Itanium处理器的销售预测被过度乐观估计，而国际能源署（IEA）对太阳能的预测则长期低估了实际增长，形成鲜明对比。有评论者指出，Itanium的预测曲线会随时间向下调整，而IEA的预测却似乎保持不变。一位自称行业分析师的参与者承认，早期对Itanium的预测确实“错得离谱”，但当时AMD的替代方案尚未出现，且64位芯片需求明确，使得分析师们难以预见其最终的失败。

---

## 6. 东亚变奏：朝鲜、日本、新加坡的城市设计与空间活化 (Urban Design and Adaptive Reuse in North Korea, Japan, and Singapore)

![东亚变奏：朝鲜、日本、新加坡的城市设计与空间活化 ](D:\python\hacknews\images\20250614\Urban_Design_and_Adaptive_Reuse_in_North_Korea,_Ja.png)

![东亚变奏：朝鲜、日本、新加坡的城市设计与空间活化 ](https://substackcdn.com/image/fetch/w_520,h_272,c_fill,f_auto,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4bddd6f6-d9bb-4b14-b3e8-cd7b198b4ef2_1575x1173.heic)

建筑师蔡至量(Calvin Chua)以“适应性再生”的创新理念，为亚洲城市更新提供新思路，探索所有权、材料和社区需求等塑造城市的隐性力量。

他的实践横跨亚洲：在新加坡，“分层地契商场”因产权分散意外变为店主们的社交中心；在日本，修复废弃古民居(kominka)的模式成功复兴乡村，甚至为村庄带来数十年首位新生儿；在朝鲜，他通过复刻公寓展示因缺乏钢材而形成的厚重、多彩的独特建筑美学。

蔡至量强调，成功的再生项目必须同时保留建筑的“躯体”与社区的“灵魂”。他的工作揭示了理解并善用城市固有的限制与活力，是激发其有机生长的关键。

原文链接：https://www.governance.fyi/p/adaptive-reuse-across-asia-singapores

论坛讨论链接：https://news.ycombinator.com/item?id=44265105

社区讨论围绕新加坡独特的“分层商场”（strata malls）展开，这种商场允许个人完全拥有商铺而非租赁。由于任何建筑改动需80%业主同意，导致一些退休业主将商铺视为社交场所，拒绝高额收购，使得这些商场成为小众商家和退休社区的非策划聚集地。讨论者指出，多伦多也有类似的零售公寓，因业主拥有产权，商家不易被随意驱逐。

此外，讨论提及了一篇关于亚洲城市适应性再利用的访谈，受访者是曾在朝鲜教授城市设计的Calvin Chua。有评论者批评这位受访者言辞空泛、缺乏具体案例，认为其提出的“重新思考边缘地区”等概念过于抽象，并指出其核心思想是鼓励在空间改造时保留现有社会结构，而非简单推倒重建。

讨论还延伸到建筑材料问题，有用户对在缺乏钢材的情况下建造40层高楼的可能性表示惊讶。另有评论指出，虽然理论上可行（如古老教堂和金字塔），但在朝鲜的背景下，建筑标准可能较低，存在地震风险，质疑其安全性和实用性。总的来说，讨论涉及了城市规划中产权、社区保留以及建筑材料和安全标准等多个维度。

---

## 7. 沙子变身超级电缆：成本骤降，全球电网不再是梦 (Worldwide power grid with glass insulated HVDC cables)

![沙子变身超级电缆：成本骤降，全球电网不再是梦 ](D:\python\hacknews\images\20250614\Worldwide_power_grid_with_glass_insulated_HVDC_cab.png)

一项极具想象力的构想或将改变全球能源格局：使用石英玻璃（沙子原料）作为绝缘体，打造超廉价的洲际海底电缆。

其核心技术有两点：1. 采用类似“鲁伯特之泪”的物理原理对玻璃进行表面硬化，使其异常坚固，可直接裸铺于海床；2. 在特制船上完成“工厂化”连续制造，即时挤压成型并直接铺设，解决了运输难题。

这种电缆可承受14兆伏超高电压，传输10吉瓦功率。据估算，一条跨大西洋电缆成本仅2300万美元，极低的成本有望让全球电网从梦想变为现实。

原文链接：https://omattos.com/2025/06/12/glass-hvdc-cables.html

论坛讨论链接：https://news.ycombinator.com/item?id=44262537

社区上，一篇关于高压直流（HVDC）海底电缆的讨论对作者的宏大构想提出了严峻质疑。一位高压工程背景的评论者直言，该设想如同将GPU时钟提升至75拍赫兹般不切实际，高压工程的复杂性远超想象。他质疑介电强度数据，指出为确保可靠性，实际可用强度仅为理论值的25%，这足以否定该方案。高压介质无法修补，任何裂缝都需整体更换。他还提及作者未考虑的寄生效应、高频纹波以及海水导电性导致的巨大能量损耗。处理14兆伏的电压在现有技术下几乎不可能，目前世界最高电压仅800千伏。

另一位在海底电信电缆行业工作的评论者也加入了讨论，强调实际部署的巨大成本和难度。他指出，一条跨洋电缆造价可达数亿美元，线路规划漫长，受海底地质活动和渔民影响。即便有先进技术，敷设船只在海上仍大幅移动，海底电缆也频繁故障，需专业船队维护。他认为作者需进行更多研究，并提出接地回流式HVDC电缆或许更适合跨国电网连接，并提及澳大利亚Sun Cable公司正在建设类似项目。

---

## 8. 硬核自研：Go语言手撸BT下载神器 (Show HN: I wrote a BitTorrent Client from scratch)

科技界迎来一个令人振奋的新项目！一款基于Go语言开发的BitTorrent客户端正积极开发中，旨在提供高效、现代的下载体验。该项目已实现BitTorrent协议核心功能，包括torrent文件解析、P2P节点发现及文件下载管理。

其内部结构设计精良，采用模块化方式，涵盖Bencode编解码、torrent文件处理、Tracker协议、对等节点通信及下载管理等关键组件。清晰的模块化架构展现了扎实的技术基础与良好可扩展性。对科技和有趣生活充满好奇的读者而言，Go语言在并发处理上的优势，使这款客户端的性能表现值得期待。

目前项目仍在活跃迭代，功能逐步完善。我们有理由相信，这款Go语言BitTorrent客户端的成熟将为数字资源共享提供高性能且现代化的新选择，为网络应用开发带来一次潜力探索。

原文链接：https://github.com/piyushgupta53/go-torrent-client

论坛讨论链接：https://news.ycombinator.com/item?id=44265851

社区对一个Go语言项目进行了积极讨论。有用户指出，在bencode解码器中处理不受信任的输入时，应限制动态分配大小，以防恶意输入导致拒绝服务攻击，建议将上限设为剩余输入长度，项目作者已将其列入待办事项。

另有用户建议，若仅需读取数据，可考虑使用Kaitai Struct来编写bencode解码器，以避免常见陷阱。在用户体验方面，有人建议在README中添加简单的使用命令行示例，并考虑实现从URL解析torrent文件的功能。此外，有用户推荐了CodeCrafters上关于BitTorrent的挑战课程作为学习资源。

关于Go语言版本，一位非Go开发者询问为何使用较旧的1.21版本。对此，有用户解释称，坚持使用Go 1.21.4或更早版本是为了支持Windows 7及2009年后的所有计算机，而更新的版本（如1.21.5及更高）仅支持Windows 10/11和较新的硬件，且对该项目无明显益处。另一用户对此表示认同，认为在不费额外力气和不牺牲功能的前提下支持更多平台（即使是旧系统）是值得的。

最后，有评论者表示这类项目让他们回想起大学时光，并强调动手实践此类项目是学习新语言的绝佳方式。

